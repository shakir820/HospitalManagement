<div class="container">
    <div class=" card my-4 shadow border-0">
        <div class="">
            <div class=" row">
                <div class="bg-gray-100 col-sm-12 col-md-3">
                    <div class="py-3 d-flex flex-column">
                        <div style="width: 100px; height: 100px;">
                          <app-profile-pic-preview [user_id]="user.id"></app-profile-pic-preview>
                        </div>
                        <div class="mt-4">
                          <div class=" font-weight-bold text-dark">{{user.name}}</div>
                          <div class=" d-flex align-items-center">
                            <div [ngClass]="{'bg-success': user.isActive == true, 'bg-danger': user.isActive == false}" style="border-radius: 50%; width: 10px; height: 10px;"></div>
                            <small [ngClass]="{'text-success': user.isActive == true, 'text-danger': user.isActive == false}" class="ml-2 font-weight-bold">{{user.isActive == true? 'Active': 'Inactive'}}</small>
                          </div>
                        </div>
                        <div class="mt-4 d-flex flex-column align-items-start">
                          <div *ngFor="let role_item of user.roles"> <span class="badge text-light rounded-pill px-2 bg-secondary">{{role_item}}</span></div>
                          <!-- <div style="border-radius: 10px;" class="px-3 small text-dark mb-2 py-2 bg-gray-200">Doctor</div> -->
                        </div>
                        <div class="d-flex font-weight-bold flex-column mt-4">
                          <div>{{user.created_date | date: 'mediumDate'}}</div>
                          <small>Joined</small>
                        </div>
                        <div *ngIf="isDoctor" class="d-flex font-weight-bold flex-column mt-4">
                          <div [ngClass]="{'text-success': user.approved == true, 'text-warning': user.approved == false}" >{{ user.approved == true? 'Approved': 'Pending' }}</div>
                          <small>Status</small>
                        </div>

                        <div  *ngIf="isDoctor && user.biography != undefined" class="mt-4 d-flex flex-column">
                          <SMall class=" font-weight-bold">Biography</SMall>
                          <div class="my-2 bg-gray-200 flex-fill" style="height: 5px; border-radius: 2px;"></div>
                          <p class="small font-weight-bold">{{ user.biography }}</p>
                        </div>

                        <div  class="mt-4 d-flex flex-column" *ngIf="isDoctor && user.specialities != undefined">
                          <SMall class=" font-weight-bold">Specialities</SMall>
                          <div class="my-2 bg-gray-200 flex-fill" style="height: 5px; border-radius: 2px;"></div>
                          <div  *ngFor="let speciality_item of user.specialities">
                            <span class="badge text-light rounded-pill px-2 bg-secondary">{{speciality_item.specialityName}}</span>
                          </div>

                        </div>

                        <div class="mt-4 d-flex flex-column" *ngIf="isDoctor && user.languages != undefined">
                          <SMall class=" font-weight-bold">Languages</SMall>
                          <div class="my-2 bg-gray-200 flex-fill" style="height: 5px; border-radius: 2px;"></div>
                          <div  *ngFor="let lang_item of user.languages">
                            <span class="badge text-light rounded-pill px-2 bg-secondary">{{lang_item.languageName}}</span>
                          </div>
                        </div>
                    </div>
                </div>



                <div class=" col-sm-12 col-md-9">
                 <div class="d-flex">
                  <div class=" flex-fill d-flex flex-column">
                    <div class=" card border-0 ">
                      <div class=" card-body">
                        <div class=" font-weight-bold text-dark">Basic Info</div>
                        <div class="mt-2 row">
                          <div class=" col">
                            <div class="font-weight-bold d-flex flex-column">
                              <small>Id</small>
                              <div>{{user.id}}</div>
                            </div>
                          </div>
                          <div class=" col">
                            <div class="font-weight-bold d-flex flex-column">
                              <small>Age</small>
                              <div>{{user.age}}</div>
                            </div>
                          </div>
                          <div class=" col">
                            <div *ngIf="user.country_name != undefined" class="font-weight-bold d-flex flex-column">
                              <small>Country</small>
                              <div>{{user.country_name}}</div>
                            </div>
                          </div>
                        </div>

                        <div class="mt-3 row">
                          <div class=" col">
                            <div class="font-weight-bold d-flex flex-column">
                              <small>Username</small>
                              <div>{{user.username}}</div>
                            </div>
                          </div>
                          <div class=" col">
                            <div class="font-weight-bold d-flex flex-column">
                              <small>Gender</small>
                              <div>{{user.gender}}</div>
                            </div>
                          </div>
                          <div class=" col">
                            <div *ngIf="user.state_name != undefined" class="font-weight-bold d-flex flex-column">
                              <small>State</small>
                              <div>{{user.state_name}}</div>
                            </div>
                          </div>
                        </div>

                        <div class="mt-3 row">
                          <div class=" col">
                            <div class="font-weight-bold d-flex flex-column">
                              <small>Email</small>
                              <div>{{user.email}}</div>
                            </div>
                          </div>
                          <div class=" col">
                            <div *ngIf="user.bloodGroup != undefined" class="font-weight-bold d-flex flex-column">
                              <small>Blood Group</small>
                              <div>{{user.bloodGroup}}</div>
                            </div>
                          </div>
                          <div class=" col">
                            <div *ngIf="user.city_name != undefined" class="font-weight-bold d-flex flex-column">
                              <small>City</small>
                              <div>{{user.city_name}}</div>
                            </div>
                          </div>
                        </div>


                        <div class="mt-3 row">
                          <div class=" col-sm-4">
                            <div *ngIf="user.phoneNumber != undefined" class="font-weight-bold d-flex flex-column">
                              <small>Mobile</small>
                              <div>{{user.phoneNumber}}</div>
                            </div>
                          </div>
                          <div class=" col">
                            <div *ngIf="user.address != undefined" class="font-weight-bold d-flex flex-column">
                              <small>Address</small>
                              <div>{{user.address}}</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div *ngIf="isDoctor" class="mt-4 card border-0 ">
                      <div class=" card-body">
                        <div class=" font-weight-bold text-dark">Doctor Info</div>
                        <div class="mt-2 row">
                          <div class=" col">
                            <div class="font-weight-bold d-flex flex-column">
                              <small>BMDC</small>
                              <div>{{user.bmdc_certifcate}}</div>
                            </div>
                          </div>
                          <div class=" col">
                            <div class="font-weight-bold d-flex flex-column">
                              <small>Type of</small>
                              <div>{{user.types_of}}</div>
                            </div>
                          </div>
                          <div class=" col">
                            <div class="font-weight-bold d-flex flex-column">
                              <small>Degree</small>
                              <div>{{user.degree_title}}</div>
                            </div>
                          </div>
                        </div>

                        <div class="mt-3 row">
                          <div class=" col-sm-4">
                            <div class="font-weight-bold d-flex flex-column">
                              <small>Title</small>
                              <div>{{user.doctor_title}}</div>
                            </div>
                          </div>
                          <div class=" col">
                            <div class="font-weight-bold d-flex flex-column">
                              <small>Experience</small>
                              <div>{{user.experience}} <span class=" ml-2">years</span></div>
                            </div>
                          </div>

                        </div>




                      </div>
                    </div>


                    <div *ngIf="isDoctor" class="mt-4 card border-0 ">
                      <div class=" card-body">
                        <div class=" font-weight-bold text-dark">Schedule Info</div>
                        <div class="mt-2 row">
                          <div *ngFor="let schedule_item of user.schedules" class=" col-sm-12 col-md-4">
                            <div class=" card">
                              <div class=" d-flex flex-column card-body">
                                <div class=" font-weight-bold">{{schedule_item.day_name | weekDay}}</div>
                                <small>{{schedule_item.start_time | date: 'shortTime'}} - {{schedule_item.end_time | date: 'shortTime'}}</small>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>


                    <div *ngIf="isDoctor" class="mt-4 card border-0 ">
                      <div class=" card-body">
                        <div class=" font-weight-bold text-dark">Visiting Price Info</div>
                        <div class="mt-2 row">
                          <div class=" col-sm-4">
                            <div class="font-weight-bold d-flex flex-column">
                              <small>New Patient</small>
                              <div>{{user.new_patient_visiting_price}} <span class="ml-2">TK</span></div>
                            </div>
                          </div>
                          <div class=" col-sm-4">
                            <div class="font-weight-bold d-flex flex-column">
                              <small>Old Patient</small>
                              <div>{{user.old_patient_visiting_price}} <span class=" ml-2">TK</span></div>
                            </div>
                          </div>

                        </div>

                      </div>
                    </div>


                  </div>
                  <div class="my-4 mr-3">
                    <div *ngIf="user != undefined" class="dropdown no-arrow">
                      <a class="dropdown-toggle" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-ellipsis-v fa-sm fa-fw text-dark"></i>
                      </a>
                      <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in" aria-labelledby="dropdownMenuLink">
                        <div class="dropdown-header">Action:</div>
                        <a class="dropdown-item text-success" *ngIf="!user.isActive" (click)="onUserActivate($event)">Activate User</a>
                        <a class="dropdown-item text-danger" *ngIf="user.isActive" (click)="onUserDeactivate($event)">Deactivate User</a>
                        <a class="dropdown-item" *ngIf="!user.approved && isDoctor" (click)="onUserApprove($event)">Approve</a>
                        <a class="dropdown-item text-warning" *ngIf="user.approved && isDoctor" (click)="onUserUnapprove($event)">Unapprove</a>
                        <a class="dropdown-item" (click)="onEditUserRole($event)">Edit Role</a>
                        <a class="dropdown-item"  *ngIf="isDoctor" (click)="onViewAppointments($event)">View Appointments</a>
                      </div>
                    </div>
                  </div>
                 </div>
                </div>



                <!-- <div class=" col-sm-1">

                </div> -->
            </div>
        </div>
    </div>
</div>




<app-edit-user-role-dialog #editUserRoleDialog (roleChanged)="onUserRoleChanged($event)"></app-edit-user-role-dialog>
